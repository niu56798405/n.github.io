(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d219fd8"],{ba36:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-card",[s("div",{attrs:{slot:"header"},slot:"header"},[s("span",[e._v("充值/福利")])]),s("el-tabs",{attrs:{"tab-position":"left"},model:{value:e.actTab,callback:function(t){e.actTab=t},expression:"actTab"}},[s("el-tab-pane",{attrs:{name:"single",label:"单账号"}},[s("single-con")],1),s("el-tab-pane",{attrs:{name:"muiti",label:"批量"}},[s("multi-con")],1)],1)],1)},a=[],i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-form",{ref:"objForm",attrs:{model:e.objForm,"label-width":"150px"}},[s("el-form-item",{attrs:{label:"批量信息"}},[s("el-upload",{attrs:{action:e.uploadUrl,"on-success":e.uploadSuccess,"on-error":e.uploadError,multiple:!1,accept:"csv",limit:1,"on-exceed":e.uploadExceed,"file-list":e.fileList}},[s("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),s("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传excel文件，且不超过500kb")])],1)],1),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitFormMulti()}}},[e._v("确定")])],1)],1)],1)},o=[],l=s("6e40"),n={name:"email-multi",data:function(){return{isUpdate:!1,fileList:[],objForm:{fileId:null}}},computed:{uploadUrl:function(){return l["a"]+API.upload}},methods:{submitFormMulti:function(){var e=this;if(this.objForm.fileId)if(this.isUpdate){var t=JSON.parse(JSON.stringify(this.objForm));this.$fetch.post(API.gift.send_gift_batch,t).then((function(t){var s=t.data;200==s.status?(e.fileList=[],e.isUpdate=!1,e.$message.success(s.desc)):e.$message.error(s.desc)}))}else this.$message.error("请重新上传文件！");else this.$message.error("请上传文件！")},uploadSuccess:function(e,t,s){200==e.status?(this.objForm.fileId=e.data.fileId,this.isUpdate=!0,this.$message.success(e.desc)):this.$message.error(e.desc)},uploadError:function(e,t,s){},uploadExceed:function(e,t){this.$message.error("文件上传数量超出上限！")}}},u=n,c=s("4e82"),d=Object(c["a"])(u,i,o,!1,null,null,null),m=d.exports,f=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-form",{ref:"objForm",attrs:{model:e.objForm,rules:e.rules,"label-width":"150px"}},[s("el-form-item",{attrs:{label:"福利",prop:"giftId"}},[s("el-select",{attrs:{placeholder:"请选择福利"},model:{value:e.objForm.giftId,callback:function(t){e.$set(e.objForm,"giftId",t)},expression:"objForm.giftId"}},e._l(e.aGifts,(function(e,t){return s("el-option",{key:t,attrs:{label:e.name,value:e.giftId}})})),1)],1),s("el-form-item",{attrs:{label:"角色ID",prop:"pid"}},[s("el-input",{attrs:{placeholder:"请输入角色ID"},model:{value:e.objForm.pid,callback:function(t){e.$set(e.objForm,"pid",t)},expression:"objForm.pid"}})],1),s("el-form-item",{attrs:{label:"服务器ID",prop:"serverId"}},[s("el-input",{attrs:{placeholder:"请输入服务器ID"},model:{value:e.objForm.serverId,callback:function(t){e.$set(e.objForm,"serverId",t)},expression:"objForm.serverId"}})],1),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("objForm")}}},[e._v("确定")])],1)],1)],1)},p=[],b={name:"welfare-single",data:function(){return{aGifts:[],aReasons:[{id:"11",name:"充值"},{id:"22",name:"福利"}],objForm:{},rules:{giftId:[{required:!0,message:"请选择",trigger:"change"}],pid:[{required:!0,message:"请输入",trigger:"blur"}],serverId:[{required:!0,message:"请选择",trigger:"change"}]}}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate((function(s){if(!s)return!1;var r=JSON.parse(JSON.stringify(t.objForm));t.$fetch.post(API.gift.send_gift,r).then((function(s){var r=s.data;200==r.status?(t.$message.success(r.desc),t.$refs[e].resetFields()):t.$message.error(r.desc)}))}))},fetchGift:function(){var e=this;this.$fetch.post(API.gift.gift_list).then((function(t){var s=t.data;200==s.status?e.aGifts=s.data:e.$message.error(s.desc)}))}},mounted:function(){this.fetchGift()}},h=b,g=Object(c["a"])(h,f,p,!1,null,null,null),v=g.exports,F={name:"email",components:{multiCon:m,singleCon:v},data:function(){return{actTab:"single"}},methods:{}},j=F,I=Object(c["a"])(j,r,a,!1,null,"52fe5f04",null);t["default"]=I.exports}}]);
//# sourceMappingURL=chunk-2d219fd8.df3a893f.js.map