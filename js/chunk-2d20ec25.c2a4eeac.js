(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d20ec25"],{b177:function(e,t,o){"use strict";o.r(t);var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-card",[o("div",{attrs:{slot:"header"},slot:"header"},[o("span",[e._v("公告管理")])]),o("el-tabs",{attrs:{"tab-position":"left"},model:{value:e.actTab,callback:function(t){e.actTab=t},expression:"actTab"}},[o("el-tab-pane",{attrs:{name:"create",label:"发布"}},[o("create-con",{on:{changeTab:e.handleGetAct}})],1),o("el-tab-pane",{attrs:{name:"todo",label:"待发布列表"}},[o("todo-con",{attrs:{oriTab:e.actTab}})],1),o("el-tab-pane",{attrs:{name:"done",label:"发布中公告"}},[o("done-con",{attrs:{oriTab:e.actTab}})],1),o("el-tab-pane",{attrs:{name:"history",label:"历史公告"}},[o("history-con",{attrs:{oriTab:e.actTab}})],1)],1)],1)},a=[],l=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-form",{ref:"objFormAnno",attrs:{model:e.objFormAnno,rules:e.rules,"label-width":"130px"}},[o("el-form-item",{attrs:{label:"公告类型",prop:"type"}},[o("el-select",{attrs:{placeholder:"请选择公告类型"},model:{value:e.objFormAnno.type,callback:function(t){e.$set(e.objFormAnno,"type",t)},expression:"objFormAnno.type"}},e._l(e.anno_type,(function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),o("el-form-item",{attrs:{label:"渠道",prop:"channels"}},[o("el-checkbox-group",{model:{value:e.objFormAnno.channels,callback:function(t){e.$set(e.objFormAnno,"channels",t)},expression:"objFormAnno.channels"}},e._l(e.aChannels,(function(t,n){return o("el-checkbox",{key:n,attrs:{label:t.id}},[e._v(e._s(t.name))])})),1)],1),o("el-form-item",{attrs:{label:"优先级",prop:"sort"}},[o("el-select",{attrs:{placeholder:"请选择优先级"},model:{value:e.objFormAnno.sort,callback:function(t){e.$set(e.objFormAnno,"sort",t)},expression:"objFormAnno.sort"}},e._l(e.aLevels,(function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),o("el-form-item",{attrs:{label:"短标题",prop:"shortTitle"}},[o("el-input",{attrs:{placeholder:"请输入短标题"},model:{value:e.objFormAnno.shortTitle,callback:function(t){e.$set(e.objFormAnno,"shortTitle",t)},expression:"objFormAnno.shortTitle"}})],1),o("el-form-item",{attrs:{label:"标题",prop:"title"}},[o("el-input",{attrs:{placeholder:"请输入标题"},model:{value:e.objFormAnno.title,callback:function(t){e.$set(e.objFormAnno,"title",t)},expression:"objFormAnno.title"}})],1),o("el-form-item",{attrs:{label:"公告内容",prop:"content"}},[o("el-input",{attrs:{type:"textarea",placeholder:"请输入公告内容"},model:{value:e.objFormAnno.content,callback:function(t){e.$set(e.objFormAnno,"content",t)},expression:"objFormAnno.content"}})],1),o("el-form-item",{attrs:{label:"开始时间",prop:"start"}},[o("el-date-picker",{attrs:{format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择开始时间"},model:{value:e.objFormAnno.start,callback:function(t){e.$set(e.objFormAnno,"start",t)},expression:"objFormAnno.start"}})],1),o("el-form-item",{attrs:{label:"结束时间",prop:"end"}},[o("el-date-picker",{attrs:{format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择结束时间"},model:{value:e.objFormAnno.end,callback:function(t){e.$set(e.objFormAnno,"end",t)},expression:"objFormAnno.end"}})],1),o("el-form-item",{attrs:{label:"游戏内公告类型",prop:"gameType"}},[o("el-radio-group",{attrs:{prop:"receiverType"},model:{value:e.objFormAnno.gameType,callback:function(t){e.$set(e.objFormAnno,"gameType",t)},expression:"objFormAnno.gameType"}},e._l(e.aGameTypes,(function(t,n){return o("el-radio",{key:n,attrs:{label:t.type}},[e._v(e._s(t.name))])})),1)],1),"3"==e.objFormAnno.type?o("el-form-item",{attrs:{label:"间隔时间",prop:"intervalTime"}},[o("el-input-number",{attrs:{"controls-position":"right",min:1},model:{value:e.objFormAnno.intervalTime,callback:function(t){e.$set(e.objFormAnno,"intervalTime",t)},expression:"objFormAnno.intervalTime"}})],1):e._e(),o("el-form-item",{attrs:{label:"公告底图"}},[o("el-input",{attrs:{placeholder:"请输入公告底图"},model:{value:e.objFormAnno.imageName,callback:function(t){e.$set(e.objFormAnno,"imageName",t)},expression:"objFormAnno.imageName"}})],1),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("objFormAnno")}}},[e._v("发布公告")])],1)],1)],1)},r=[],i={name:"anno-create",data:function(){return{objFormAnno:{type:"",channels:[],sort:"",shortTitle:"",title:"",content:"",start:null,end:null,aGameTypes:"",intervalTime:0,imageName:""},rules:{type:[{required:!0,message:"请选择公告类型",trigger:"change"}],channels:[{type:"array",required:!0,message:"请至少选择一个渠道",trigger:"change"}],sort:[{required:!0,message:"请选择优先级",trigger:"change"}],shortTitle:[{required:!0,message:"请输入短标题",trigger:"blur"}],title:[{required:!0,message:"请输入标题",trigger:"blur"}],content:[{required:!0,message:"请输入公告内容",trigger:"blur"}],start:[{required:!0,message:"请选择时间",trigger:"change"}],end:[{required:!0,message:"请选择时间",trigger:"change"}],gameType:[{required:!0,message:"请选择游戏内公告类型",trigger:"change"}],intervalTime:[{required:!0,message:"请选择公告类型"}]},anno_type:[{label:"登录页公告",value:"1"},{label:"游戏内公告",value:"2"},{label:"跑马灯",value:"3"}],aChannels:[],aLevels:[{label:"high",value:"1"},{label:"mid",value:"2"},{label:"low",value:"3"}],aGameTypes:[]}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate((function(o){if(!o)return!1;var n=JSON.parse(JSON.stringify(t.objFormAnno));t.$fetch.post(API.anno.send_notice,n).then((function(o){var n=o.data;200==n.status?(t.$emit("changeTab","todo"),t.$refs[e].resetFields(),t.$message.success(n.desc)):t.$message.error(n.desc)}))}))},fetchChannels:function(){var e=this;this.$fetch.post(API.anno.channels).then((function(t){var o=t.data;200==o.status?e.aChannels=o.data:e.$message.error(o.desc)}))},fetchGameTypes:function(){var e=this;this.$fetch.post(API.anno.game_notice_type_list).then((function(t){var o=t.data;200==o.status?e.aGameTypes=o.data:e.$message.error(o.desc)}))}},mounted:function(){this.fetchChannels(),this.fetchGameTypes()}},s=i,c=o("4e82"),m=Object(c["a"])(s,l,r,!1,null,null,null),u=m.exports,d=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-button",{attrs:{disabled:e.aSelectTodo.length<1},on:{click:function(t){return e.handleMultTodo()}}},[e._v("全部删除")]),o("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.aTableDataTodo,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectRowsTodo}},[o("el-table-column",{attrs:{type:"selection",width:"50"}}),o("el-table-column",{attrs:{prop:"id",label:"ID","min-width":"70"}}),o("el-table-column",{attrs:{label:"渠道","min-width":"100","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(e.returnChannel(t.row.channels)))])]}}])}),o("el-table-column",{attrs:{prop:"start",label:"开始时间","min-width":"100","show-overflow-tooltip":""}}),o("el-table-column",{attrs:{prop:"end",label:"结束时间","min-width":"100","show-overflow-tooltip":""}}),o("el-table-column",{attrs:{prop:"shortTitle",label:"短标题","min-width":"100","show-overflow-tooltip":""}}),o("el-table-column",{attrs:{prop:"title",label:"标题","min-width":"100","show-overflow-tooltip":""}}),o("el-table-column",{attrs:{prop:"content",label:"公告内容","min-width":"100","show-overflow-tooltip":""}}),o("el-table-column",{attrs:{label:"标签","min-width":"100","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(e.returnType(t.row.type)))])]}}])}),o("el-table-column",{attrs:{prop:"sort",label:"优先级","min-width":"100","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(e.returnSort(t.row.sort)))])]}}])}),o("el-table-column",{attrs:{prop:"imageName",label:"公告底图","min-width":"100","show-overflow-tooltip":""}}),o("el-table-column",{attrs:{label:"操作","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(o){return o.preventDefault(),e.handleClickEditTodo(t.row)}}},[e._v("编辑")]),o("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(o){return o.preventDefault(),e.handleClickDelete(t.row)}}},[e._v("删除")])]}}])})],1),o("el-dialog",{attrs:{title:"修改公告",visible:e.bDialogVisible},on:{"update:visible":function(t){e.bDialogVisible=t}}},[o("el-form",{ref:"objFormAnnoEdit",attrs:{model:e.objFormAnnoEdit,rules:e.rules,"label-width":"130px"}},[o("el-form-item",{attrs:{label:"公告类型",prop:"type"}},[o("el-select",{attrs:{placeholder:"请选择公告类型"},model:{value:e.objFormAnnoEdit.type,callback:function(t){e.$set(e.objFormAnnoEdit,"type",t)},expression:"objFormAnnoEdit.type"}},e._l(e.anno_type,(function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),o("el-form-item",{attrs:{label:"渠道",prop:"channels"}},[o("el-checkbox-group",{model:{value:e.objFormAnnoEdit.channels,callback:function(t){e.$set(e.objFormAnnoEdit,"channels",t)},expression:"objFormAnnoEdit.channels"}},e._l(e.aChannels,(function(t,n){return o("el-checkbox",{key:n,attrs:{label:t.id}},[e._v(e._s(t.name))])})),1)],1),o("el-form-item",{attrs:{label:"优先级",prop:"sort"}},[o("el-select",{attrs:{placeholder:"请选择优先级"},model:{value:e.objFormAnnoEdit.sort,callback:function(t){e.$set(e.objFormAnnoEdit,"sort",t)},expression:"objFormAnnoEdit.sort"}},e._l(e.aLevels,(function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),o("el-form-item",{attrs:{label:"短标题",prop:"shortTitle"}},[o("el-input",{attrs:{placeholder:"请输入短标题"},model:{value:e.objFormAnnoEdit.shortTitle,callback:function(t){e.$set(e.objFormAnnoEdit,"shortTitle",t)},expression:"objFormAnnoEdit.shortTitle"}})],1),o("el-form-item",{attrs:{label:"标题",prop:"title"}},[o("el-input",{attrs:{placeholder:"请输入标题"},model:{value:e.objFormAnnoEdit.title,callback:function(t){e.$set(e.objFormAnnoEdit,"title",t)},expression:"objFormAnnoEdit.title"}})],1),o("el-form-item",{attrs:{label:"公告内容",prop:"content"}},[o("el-input",{attrs:{type:"textarea",placeholder:"请输入公告内容"},model:{value:e.objFormAnnoEdit.content,callback:function(t){e.$set(e.objFormAnnoEdit,"content",t)},expression:"objFormAnnoEdit.content"}})],1),o("el-form-item",{attrs:{label:"开始时间",prop:"start"}},[o("el-date-picker",{attrs:{format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择开始时间"},model:{value:e.objFormAnnoEdit.start,callback:function(t){e.$set(e.objFormAnnoEdit,"start",t)},expression:"objFormAnnoEdit.start"}})],1),o("el-form-item",{attrs:{label:"结束时间",prop:"end"}},[o("el-date-picker",{attrs:{format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择结束时间"},model:{value:e.objFormAnnoEdit.end,callback:function(t){e.$set(e.objFormAnnoEdit,"end",t)},expression:"objFormAnnoEdit.end"}})],1),o("el-form-item",{attrs:{label:"游戏内公告类型",prop:"gameType"}},[o("el-radio-group",{attrs:{prop:"receiverType"},model:{value:e.objFormAnnoEdit.gameType,callback:function(t){e.$set(e.objFormAnnoEdit,"gameType",t)},expression:"objFormAnnoEdit.gameType"}},e._l(e.aGameTypes,(function(t,n){return o("el-radio",{key:n,attrs:{label:t.type}},[e._v(e._s(t.name))])})),1)],1),"3"==e.objFormAnnoEdit.type?o("el-form-item",{attrs:{label:"间隔时间",prop:"intervalTime"}},[o("el-input-number",{attrs:{"controls-position":"right",min:1},model:{value:e.objFormAnnoEdit.intervalTime,callback:function(t){e.$set(e.objFormAnnoEdit,"intervalTime",t)},expression:"objFormAnnoEdit.intervalTime"}})],1):e._e(),o("el-form-item",{attrs:{label:"公告底图"}},[o("el-input",{attrs:{placeholder:"请输入公告底图"},model:{value:e.objFormAnnoEdit.imageName,callback:function(t){e.$set(e.objFormAnnoEdit,"imageName",t)},expression:"objFormAnnoEdit.imageName"}})],1),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleClickUpdateAnno("objFormAnnoEdit")}}},[e._v("修改公告")])],1)],1)],1)],1)},p=[],b=(o("cc57"),o("6d57"),{name:"anno-todo",props:{oriTab:{type:String,default:"create"}},data:function(){return{anno_type:[{label:"登录页公告",value:"1"},{label:"游戏内公告",value:"2"},{label:"跑马灯",value:"3"}],aChannels:[],aLevels:[{label:"high",value:"1"},{label:"mid",value:"2"},{label:"low",value:"3"}],aGameTypes:[],bDialogVisible:!1,objFormAnnoEdit:{intervalTime:0},rules:{type:[{required:!0,message:"请选择公告类型",trigger:"change"}],channels:[{type:"array",required:!0,message:"请至少选择一个渠道",trigger:"change"}],sort:[{required:!0,message:"请选择优先级",trigger:"change"}],shortTitle:[{required:!0,message:"请输入短标题",trigger:"blur"}],title:[{required:!0,message:"请输入标题",trigger:"blur"}],content:[{required:!0,message:"请输入公告内容",trigger:"blur"}],start:[{required:!0,message:"请选择时间",trigger:"change"}],end:[{required:!0,message:"请选择时间",trigger:"change"}],gameType:[{required:!0,message:"请选择公告类型",trigger:"change"}],intervalTime:[{required:!0,message:"请选择公告类型"}]},aTableDataTodo:[],aSelectTodo:[]}},watch:{oriTab:{handler:function(){"todo"==this.oriTab&&this.fetchTodoList()}}},methods:{returnChannel:function(e){var t=[];e.forEach((function(e){t.push(e.name)}));var o=t.join(",");return o},returnType:function(e){var t="--";return this.anno_type.forEach((function(o){o.value+""==e+""&&(t=o.label)})),t},returnSort:function(e){var t="--";return this.aLevels.forEach((function(o){o.value+""==e+""&&(t=o.label)})),t},handleClickEditTodo:function(e){this.objFormAnnoEdit=JSON.parse(JSON.stringify(e));var t=[];e.channels.forEach((function(e){t.push(e.id)})),this.objFormAnnoEdit.sort+="",this.objFormAnnoEdit.type+="",this.objFormAnnoEdit.channels=t,this.bDialogVisible=!0},handleSelectRowsTodo:function(e){this.aSelectTodo=e},handleClickDelete:function(e){var t=this;this.$confirm("此操作将删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var o={id:[e.id]};t.$fetch.post(API.anno.delete_notice,o).then((function(e){var o=e.data;200==o.status?t.fetchTodoList():t.$message.error(o.desc)}))}))},handleClickUpdateAnno:function(e){var t=this;this.$refs[e].validate((function(o){if(!o)return!1;var n=JSON.parse(JSON.stringify(t.objFormAnnoEdit));t.$fetch.post(API.anno.update_notice,n).then((function(o){var n=o.data;200==n.status?(t.fetchTodoList(),t.$refs[e].resetFields()):t.$message.error(n.desc)}))})),this.bDialogVisible=!1},handleMultTodo:function(){var e=this;this.$confirm("此操作将删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t=e.aSelectTodo.map((function(e){return e.id})),o={id:t};e.$fetch.post(API.anno.delete_notice,o).then((function(t){var o=t.data;200==o.status?e.fetchTodoList():e.$message.error(o.desc)}))}))},fetchTodoList:function(){var e=this;this.$fetch.post(API.anno.not_start_notice).then((function(t){var o=t.data;200==o.status?e.aTableDataTodo=o.data:e.$message.error(o.desc)}))},fetchChannels:function(){var e=this;this.$fetch.post(API.anno.channels).then((function(t){var o=t.data;200==o.status?e.aChannels=o.data:e.$message.error(o.desc)}))},fetchGameTypes:function(){var e=this;this.$fetch.post(API.anno.game_notice_type_list).then((function(t){var o=t.data;200==o.status?e.aGameTypes=o.data:e.$message.error(o.desc)}))}},mounted:function(){this.fetchTodoList(),this.fetchChannels(),this.fetchGameTypes()}}),h=b,f=Object(c["a"])(h,d,p,!1,null,null,null),v=f.exports,y=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-button",{attrs:{disabled:e.aSelectTodo.length<1},on:{click:function(t){return e.handleMultTodo()}}},[e._v("全部删除")]),o("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.aTableDataTodo,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectRowsTodo}},[o("el-table-column",{attrs:{type:"selection",width:"50"}}),o("el-table-column",{attrs:{prop:"id",label:"ID","min-width":"70"}}),o("el-table-column",{attrs:{label:"渠道","min-width":"100","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(e.returnChannel(t.row.channels)))])]}}])}),o("el-table-column",{attrs:{prop:"start",label:"开始时间","min-width":"100","show-overflow-tooltip":""}}),o("el-table-column",{attrs:{prop:"end",label:"结束时间","min-width":"100","show-overflow-tooltip":""}}),o("el-table-column",{attrs:{prop:"shortTitle",label:"短标题","min-width":"100","show-overflow-tooltip":""}}),o("el-table-column",{attrs:{prop:"title",label:"标题","min-width":"100","show-overflow-tooltip":""}}),o("el-table-column",{attrs:{prop:"content",label:"公告内容","min-width":"100","show-overflow-tooltip":""}}),o("el-table-column",{attrs:{label:"标签","min-width":"100","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(e.returnType(t.row.type)))])]}}])}),o("el-table-column",{attrs:{prop:"sort",label:"优先级","min-width":"100","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(e.returnSort(t.row.sort)))])]}}])}),o("el-table-column",{attrs:{prop:"imageName",label:"公告底图","min-width":"100","show-overflow-tooltip":""}}),o("el-table-column",{attrs:{label:"操作","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(o){return o.preventDefault(),e.handleClickEditTodo(t.row)}}},[e._v("编辑")]),o("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(o){return o.preventDefault(),e.handleClickDelete(t.row)}}},[e._v("删除")])]}}])})],1),o("el-dialog",{attrs:{title:"修改公告",visible:e.bDialogVisible},on:{"update:visible":function(t){e.bDialogVisible=t}}},[o("el-form",{ref:"objFormAnnoEdit",attrs:{model:e.objFormAnnoEdit,rules:e.rules,"label-width":"130px"}},[o("el-form-item",{attrs:{label:"公告类型",prop:"type"}},[o("el-select",{attrs:{placeholder:"请选择公告类型"},model:{value:e.objFormAnnoEdit.type,callback:function(t){e.$set(e.objFormAnnoEdit,"type",t)},expression:"objFormAnnoEdit.type"}},e._l(e.anno_type,(function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),o("el-form-item",{attrs:{label:"渠道",prop:"channels"}},[o("el-checkbox-group",{model:{value:e.objFormAnnoEdit.channels,callback:function(t){e.$set(e.objFormAnnoEdit,"channels",t)},expression:"objFormAnnoEdit.channels"}},e._l(e.aChannels,(function(t,n){return o("el-checkbox",{key:n,attrs:{label:t.id}},[e._v(e._s(t.name))])})),1)],1),o("el-form-item",{attrs:{label:"优先级",prop:"sort"}},[o("el-select",{attrs:{placeholder:"请选择优先级"},model:{value:e.objFormAnnoEdit.sort,callback:function(t){e.$set(e.objFormAnnoEdit,"sort",t)},expression:"objFormAnnoEdit.sort"}},e._l(e.aLevels,(function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),o("el-form-item",{attrs:{label:"短标题",prop:"shortTitle"}},[o("el-input",{attrs:{placeholder:"请输入短标题"},model:{value:e.objFormAnnoEdit.shortTitle,callback:function(t){e.$set(e.objFormAnnoEdit,"shortTitle",t)},expression:"objFormAnnoEdit.shortTitle"}})],1),o("el-form-item",{attrs:{label:"标题",prop:"title"}},[o("el-input",{attrs:{placeholder:"请输入标题"},model:{value:e.objFormAnnoEdit.title,callback:function(t){e.$set(e.objFormAnnoEdit,"title",t)},expression:"objFormAnnoEdit.title"}})],1),o("el-form-item",{attrs:{label:"公告内容",prop:"content"}},[o("el-input",{attrs:{type:"textarea",placeholder:"请输入公告内容"},model:{value:e.objFormAnnoEdit.content,callback:function(t){e.$set(e.objFormAnnoEdit,"content",t)},expression:"objFormAnnoEdit.content"}})],1),o("el-form-item",{attrs:{label:"开始时间",prop:"start"}},[o("el-date-picker",{attrs:{format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择开始时间"},model:{value:e.objFormAnnoEdit.start,callback:function(t){e.$set(e.objFormAnnoEdit,"start",t)},expression:"objFormAnnoEdit.start"}})],1),o("el-form-item",{attrs:{label:"结束时间",prop:"end"}},[o("el-date-picker",{attrs:{format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择结束时间"},model:{value:e.objFormAnnoEdit.end,callback:function(t){e.$set(e.objFormAnnoEdit,"end",t)},expression:"objFormAnnoEdit.end"}})],1),o("el-form-item",{attrs:{label:"游戏内公告类型",prop:"gameType"}},[o("el-radio-group",{attrs:{prop:"receiverType"},model:{value:e.objFormAnnoEdit.gameType,callback:function(t){e.$set(e.objFormAnnoEdit,"gameType",t)},expression:"objFormAnnoEdit.gameType"}},e._l(e.aGameTypes,(function(t,n){return o("el-radio",{key:n,attrs:{label:t.type}},[e._v(e._s(t.name))])})),1)],1),"3"==e.objFormAnnoEdit.type?o("el-form-item",{attrs:{label:"间隔时间",prop:"intervalTime"}},[o("el-input-number",{attrs:{"controls-position":"right",min:1},model:{value:e.objFormAnnoEdit.intervalTime,callback:function(t){e.$set(e.objFormAnnoEdit,"intervalTime",t)},expression:"objFormAnnoEdit.intervalTime"}})],1):e._e(),o("el-form-item",{attrs:{label:"公告底图"}},[o("el-input",{attrs:{placeholder:"请输入公告底图"},model:{value:e.objFormAnnoEdit.imageName,callback:function(t){e.$set(e.objFormAnnoEdit,"imageName",t)},expression:"objFormAnnoEdit.imageName"}})],1),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleClickUpdateAnno("objFormAnnoEdit")}}},[e._v("修改公告")])],1)],1)],1)],1)},g=[],T={name:"anno-todo",props:{oriTab:{type:String,default:"create"}},data:function(){return{anno_type:[{label:"登录页公告",value:"1"},{label:"游戏内公告",value:"2"},{label:"跑马灯",value:"3"}],aChannels:[],aLevels:[{label:"high",value:"1"},{label:"mid",value:"2"},{label:"low",value:"3"}],aGameTypes:[],bDialogVisible:!1,objFormAnnoEdit:{intervalTime:0},rules:{type:[{required:!0,message:"请选择公告类型",trigger:"change"}],channels:[{type:"array",required:!0,message:"请至少选择一个渠道",trigger:"change"}],sort:[{required:!0,message:"请选择优先级",trigger:"change"}],shortTitle:[{required:!0,message:"请输入短标题",trigger:"blur"}],title:[{required:!0,message:"请输入标题",trigger:"blur"}],content:[{required:!0,message:"请输入公告内容",trigger:"blur"}],start:[{required:!0,message:"请选择时间",trigger:"change"}],end:[{required:!0,message:"请选择时间",trigger:"change"}],gameType:[{required:!0,message:"请选择公告类型",trigger:"change"}],intervalTime:[{required:!0,message:"请选择公告类型"}]},aTableDataTodo:[],aSelectTodo:[]}},watch:{oriTab:{handler:function(){"done"==this.oriTab&&this.fetchDoneList()}}},methods:{returnChannel:function(e){var t=[];e.forEach((function(e){t.push(e.name)}));var o=t.join(",");return o},returnType:function(e){var t="--";return this.anno_type.forEach((function(o){o.value+""==e+""&&(t=o.label)})),t},returnSort:function(e){var t="--";return this.aLevels.forEach((function(o){o.value+""==e+""&&(t=o.label)})),t},handleClickEditTodo:function(e){this.objFormAnnoEdit=JSON.parse(JSON.stringify(e));var t=[];e.channels.forEach((function(e){t.push(e.id)})),this.objFormAnnoEdit.sort+="",this.objFormAnnoEdit.type+="",this.objFormAnnoEdit.channels=t,this.bDialogVisible=!0},handleSelectRowsTodo:function(e){this.aSelectTodo=e},handleClickDelete:function(e){var t=this;this.$confirm("此操作将删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.aSel;var o={id:[e.id]};t.$fetch.post(API.anno.delete_notice,o).then((function(e){var o=e.data;200==o.status?t.fetchDoneList():t.$message.error(o.desc)}))}))},handleClickUpdateAnno:function(e){var t=this;this.$refs[e].validate((function(o){if(!o)return!1;var n=JSON.parse(JSON.stringify(t.objFormAnnoEdit));t.$fetch.post(API.anno.update_notice,n).then((function(o){var n=o.data;200==n.status?(t.fetchDoneList(),t.$refs[e].resetFields()):t.$message.error(n.desc)}))})),this.bDialogVisible=!1},handleMultTodo:function(){var e=this;this.$confirm("此操作将删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t=e.aSelectTodo.map((function(e){return e.id})),o={id:t};e.$fetch.post(API.anno.delete_notice,o).then((function(t){var o=t.data;200==o.status?e.fetchDoneList():e.$message.error(o.desc)}))}))},fetchDoneList:function(){var e=this;this.$fetch.post(API.anno.in_release_notice).then((function(t){var o=t.data;200==o.status?e.aTableDataTodo=o.data:e.$message.error(o.desc)}))},fetchChannels:function(){var e=this;this.$fetch.post(API.anno.channels).then((function(t){var o=t.data;200==o.status?e.aChannels=o.data:e.$message.error(o.desc)}))},fetchGameTypes:function(){var e=this;this.$fetch.post(API.anno.game_notice_type_list).then((function(t){var o=t.data;200==o.status?e.aGameTypes=o.data:e.$message.error(o.desc)}))}},mounted:function(){this.fetchDoneList(),this.fetchChannels(),this.fetchGameTypes()}},A=T,j=Object(c["a"])(A,y,g,!1,null,null,null),F=j.exports,w=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.aTableDataHistory,"tooltip-effect":"dark"}},[o("el-table-column",{attrs:{prop:"id",label:"ID","min-width":"70"}}),o("el-table-column",{attrs:{label:"渠道","min-width":"100","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(e.returnChannel(t.row.channels)))])]}}])}),o("el-table-column",{attrs:{prop:"start",label:"开始时间","min-width":"100","show-overflow-tooltip":""}}),o("el-table-column",{attrs:{prop:"end",label:"结束时间","min-width":"100","show-overflow-tooltip":""}}),o("el-table-column",{attrs:{prop:"shortTitle",label:"短标题","min-width":"100","show-overflow-tooltip":""}}),o("el-table-column",{attrs:{prop:"title",label:"标题","min-width":"100","show-overflow-tooltip":""}}),o("el-table-column",{attrs:{prop:"content",label:"公告内容","min-width":"100","show-overflow-tooltip":""}}),o("el-table-column",{attrs:{label:"标签","min-width":"100","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(e.returnType(t.row.type)))])]}}])}),o("el-table-column",{attrs:{prop:"sort",label:"优先级","min-width":"100","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(e.returnSort(t.row.sort)))])]}}])}),o("el-table-column",{attrs:{prop:"imageName",label:"公告底图","min-width":"100","show-overflow-tooltip":""}})],1)],1)},_=[],E={name:"anno-history",props:{oriTab:{type:String,default:"create"}},data:function(){return{anno_type:[{label:"登录页公告",value:"1"},{label:"游戏内公告",value:"2"},{label:"跑马灯",value:"3"}],aLevels:[{label:"high",value:"1"},{label:"mid",value:"2"},{label:"low",value:"3"}],aTableDataHistory:[]}},watch:{oriTab:{handler:function(){"history"==this.oriTab&&this.fetchHistoryList()}}},methods:{returnChannel:function(e){var t=[];e.forEach((function(e){t.push(e.name)}));var o=t.join(",");return o},returnType:function(e){var t="--";return this.anno_type.forEach((function(o){o.value+""==e+""&&(t=o.label)})),t},returnSort:function(e){var t="--";return this.aLevels.forEach((function(o){o.value+""==e+""&&(t=o.label)})),t},fetchHistoryList:function(){var e=this;this.$fetch.post(API.anno.over_time_notice).then((function(t){var o=t.data;200==o.status?e.aTableDataHistory=o.data:e.$message.error()}))}},mounted:function(){this.fetchHistoryList()}},k=E,$=Object(c["a"])(k,w,_,!1,null,null,null),x=$.exports,S={name:"announcement",components:{createCon:u,todoCon:v,doneCon:F,historyCon:x},data:function(){return{actTab:"create"}},computed:{},methods:{handleGetAct:function(e){this.actTab=e}},mounted:function(){}},C=S,D=Object(c["a"])(C,n,a,!1,null,"7a7618ab",null);t["default"]=D.exports}}]);
//# sourceMappingURL=chunk-2d20ec25.c2a4eeac.js.map